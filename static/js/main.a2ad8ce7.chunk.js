(this["webpackJsonporders-restaurant"]=this["webpackJsonporders-restaurant"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/Account.02b7d5d2.png"},,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/LoginSignup.1b27b6cc.png"},,function(e,t,a){e.exports=a.p+"static/media/Payment.d5e2c438.png"},,function(e,t,a){e.exports=a(57)},,,,,function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),c=a.n(l),u=(a(35),a(1)),i=a(3),o=a(26),m=a.n(o);a(36);function s(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title"},"Passez une commande"),r.a.createElement("div",{className:"ctnr-img-redirection"},r.a.createElement("img",{className:"background",src:m.a,alt:"fond"}),r.a.createElement("div",{className:"redirection"},r.a.createElement(u.b,{to:"signup"},"Inscription"),r.a.createElement(u.b,{to:"login"},"Connexion"))))}var d=a(2),E=r.a.createContext(null);a(41);function f(e){var t=Object(n.useState)(0),a=Object(d.a)(t,2),l=a[0],c=a[1],u=Object(n.useContext)(E),i=!1,o=0;return r.a.createElement("div",{className:"ctnr-datas"},r.a.createElement("div",{className:"datas"},r.a.createElement("li",{key:e.id},"Nom: ",e.name),r.a.createElement("li",null,"Compositions: ",e.compositions),r.a.createElement("li",null,"Prix: ",e.price,"\u20ac")),r.a.createElement("input",{type:"button",value:"Ajouter",onClick:function(){c(l+1);for(var t=0;t<u.length;t++)if(u[t].id===e.id){i=!0,o=t;break}i?u[o].quantity=l:u.push({quantity:l,name:e.name,id:e.id,price:e.price})}}),r.a.createElement("input",{type:"button",value:"Diminuer",onClick:function(){c(0===l?0:l-1);for(var t=0;t<u.length;t++)if(u[t].id===e.id){i=!0,o=t;break}i&&(u[o].quantity=l)}}),r.a.createElement("p",null,"Vous souhaitez ",l," ",e.name))}var p=r.a.createContext(null);a(42);function h(e){var t=Object(n.useContext)(E),a=Object(n.useContext)(p),l=Object(n.useState)(null),c=Object(d.a)(l,2),i=c[0],o=c[1],m=Object(n.useState)(null),s=Object(d.a)(m,2),f=s[0],h=s[1];Object(n.useEffect)((function(){var t=[];a.auth.onAuthStateChanged((function(n){n?o(n):e.history.push("/"),a.getUserOrder().where("uid","==",n.uid).get().then((function(e){e.forEach((function(e){void 0!=e.data().futurOrder&&t.push(e.data().futurOrder[0].obj)}))})).then((function(){t.forEach((function(e){h(e)}))}))}))}),[i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"validate-order"},r.a.createElement("hr",{className:"line-validate"}),r.a.createElement(u.b,{to:"commande",onClick:function(){var e;a.getUserOrder().where("uid","==",i.uid).get().then((function(t){t.forEach((function(t){return e=t.data().futurOrder[t.data().futurOrder.length-1].id}))})).then((function(){null===f?a.addOrder(i.uid,i.email,t):a.getUserOrder().doc(i.uid).update({futurOrder:a.addInArray().arrayUnion({id:e+1,isPay:!1,date:new Date,obj:t})})}))}},"Valider votre commande")))}a(43);function b(e){var t=Object(n.useContext)(p),a=Object(n.useState)(null),l=Object(d.a)(a,2),c=l[0],i=l[1];return t.auth.onAuthStateChanged((function(e){i(e.email)})),"cyril@hotmail.fr"!==c?r.a.createElement("header",null,r.a.createElement("h2",null,"Bonjour ",e.email),r.a.createElement("div",{className:"nav-disconnected"},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"welcome"},"Accueil"),r.a.createElement(u.b,{to:"commande"},"Commande"),r.a.createElement(u.b,{to:"summaryOrders"},"R\xe9capitulatifs")))),r.a.createElement("button",{onClick:t.signoutUser},"Se d\xe9connecter"))):r.a.createElement("header",null,r.a.createElement("h2",null,"Bonjour ",e.email),r.a.createElement("div",{className:"nav-disconnected"},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"welcome"},"Accueil"),r.a.createElement(u.b,{to:"commande"},"Commande"),r.a.createElement(u.b,{to:"summaryOrders"},"R\xe9capitulatif"),r.a.createElement(u.b,{to:"admin"},"Admin")))),r.a.createElement("button",{onClick:t.signoutUser},"Se d\xe9connecter")))}a(44);function g(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"welcome"},"Accueil"),r.a.createElement(u.b,{to:"commande"},"Commande"),r.a.createElement(u.b,{to:"summaryOrders"},"R\xe9capitulatifs")))))}a(45);function v(e){var t=Object(n.useContext)(p),a=Object(n.useState)(null),l=Object(d.a)(a,2),c=l[0],u=l[1],i=Object(n.useState)([]),o=Object(d.a)(i,2),m=o[0],s=o[1];return Object(n.useEffect)((function(){var a=t.auth.onAuthStateChanged((function(t){t?u(t.email):e.history.push("/")}));return t.displayOrder().get().then((function(e){var t=[];e.forEach((function(e){return t.push(e.data())})),s(t)})).catch((function(e){return console.log(e)})),function(){a()}}),[]),null===c?r.a.createElement("div",null,r.a.createElement("p",null,"Chargement ...")):r.a.createElement("div",null,r.a.createElement(b,{email:c.email}),r.a.createElement("h1",{className:"title-page"},"Choix de vos commandes"),r.a.createElement("hr",null),r.a.createElement("section",{className:"container-orders"},r.a.createElement(E.Provider,{value:[]},m.map((function(e,t,a){return r.a.createElement(f,{key:e.id,name:e.nom,price:e.prix,compositions:e.compo,uid:c.uid,id:e.id})})),r.a.createElement(h,null))),r.a.createElement(g,null))}var O=a(9),j=a(7),y=(a(46),a(15)),C=a.n(y);function N(e){var t={mail:"",password:""},a=Object(n.useContext)(p),l=Object(n.useState)(t),c=Object(d.a)(l,2),i=c[0],o=c[1],m=Object(n.useState)(""),s=Object(d.a)(m,2),E=s[0],f=s[1],h=i.mail,b=i.password,g=function(e){o(Object(j.a)(Object(j.a)({},i),{},Object(O.a)({},e.target.id,e.target.value)))},v=""!==E&&r.a.createElement("span",null,E.message);return r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"form",onSubmit:function(n){n.preventDefault(),a.loginUser(h,b).then((function(){e.history.push("./welcome"),o(Object(j.a)({},t))})).catch((function(e){f(e)}))}},r.a.createElement("div",{className:"ctnr-form"},r.a.createElement("h1",{className:"login"},"Se connecter"),r.a.createElement("div",{className:"ctnr-input"},v,r.a.createElement("input",{type:"text",placeholder:"email",value:h,onChange:g,id:"mail"}),r.a.createElement("input",{type:"password",placeholder:"Mot de passe",value:b,onChange:g,id:"password"}),r.a.createElement("div",null,r.a.createElement("input",{type:"submit"}),r.a.createElement(u.b,{to:"signup"}," Mot de passe oubli\xe9 ?")),r.a.createElement(u.b,{className:"not-signup",to:"signup"}," Pas encore inscrit ? ",r.a.createElement("span",null,"S'inscrire"),"  ")))),r.a.createElement("div",{className:"ctnr-img"},r.a.createElement("img",{src:C.a})))}a(47);function S(e){var t=Object(n.useContext)(p),a={mail:"",password:""},l=Object(n.useState)(a),c=Object(d.a)(l,2),i=c[0],o=c[1],m=Object(n.useState)(""),s=Object(d.a)(m,2),E=s[0],f=s[1],h=i.mail,b=i.password,g=""!==E&&r.a.createElement("span",null,E.message),v=function(e){o(Object(j.a)(Object(j.a)({},i),{},Object(O.a)({},e.target.id,e.target.value)))};return r.a.createElement("div",{className:"container"},g,r.a.createElement("form",{className:"form",onSubmit:function(n){n.preventDefault(),t.signupUser(h,b).then((function(n){o(Object(j.a)({},a)),t.setUserId(n.user.uid,n.user.email,n.user.uid),e.history.push("/login")})).catch((function(e){f(e)}))}},r.a.createElement("div",{className:"ctnr-form"},r.a.createElement("h1",{className:"login"},"S' inscrire"),r.a.createElement("div",{className:"ctnr-input"},r.a.createElement("input",{type:"text",placeholder:"email",value:h,onChange:v,id:"mail"}),r.a.createElement("input",{type:"password",placeholder:"Mot de passe",value:b,onChange:v,id:"password"}),r.a.createElement("div",null,r.a.createElement("input",{type:"submit"}),r.a.createElement(u.b,{to:"signup"}," Mot de passe oubli\xe9 ?")),r.a.createElement(u.b,{className:"not-signup",to:"login"}," D\xe9j\xe0 insrit ? ",r.a.createElement("span",null,"Se connecter"),"  ")))),r.a.createElement("div",{className:"ctnr-img"},r.a.createElement("img",{src:C.a,alt:"fond"})))}function w(){return r.a.createElement("div",null,"ErrorPage")}a(48);function x(e){var t=Object(n.useContext)(p),a=Object(n.useState)({name:"",price:"",compositions:""}),l=Object(d.a)(a,2),c=l[0],u=l[1],i=c.name,o=c.price,m=c.compositions,s=Object(n.useState)(null),E=Object(d.a)(s,2),f=E[0],h=E[1],v=document.querySelector(".send-datas"),y=function(e){u(Object(j.a)(Object(j.a)({},c),{},Object(O.a)({},e.target.id,e.target.value))),""!==i&&""!==o&&""!==m&&(v.removeAttribute("disabled"),v.style.color="#665df5")};return Object(n.useEffect)((function(){var a=t.auth.onAuthStateChanged((function(t){t?h(t):e.history.push("/")}));return function(){a()}}),[f]),null===f?r.a.createElement("div",null,r.a.createElement("p",null,"Chargement...")):r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{email:f.email}),r.a.createElement("div",null,r.a.createElement("h1",{className:"title-page"},"Ajouter un plat"),r.a.createElement("hr",null),r.a.createElement("form",{className:"form-admin",onSubmit:function(e){var a;e.preventDefault(),t.displayOrder().orderBy("id","desc").limit(1).get().then((function(e){e.forEach((function(e){return a=e.data().id})),""==Object(j.a)({},a)&&console.log("vide"),t.setMenu(i,o,m,a+1)})).catch((function(e){return console.log(e)})),u(Object(j.a)({},a))}},r.a.createElement("div",null,r.a.createElement("label",null,"Nom du plat:"),r.a.createElement("input",{type:"text",placeholder:"pate boulo",id:"name",value:i,onChange:y}),r.a.createElement("label",null,"Prix:"),r.a.createElement("input",{type:"number",placeholder:"10",id:"price",value:o,onChange:y,min:"0"}),r.a.createElement("label",null,"Compositions:"),r.a.createElement("input",{type:"text",placeholder:"pate, bolognaise, oignons",id:"compositions",value:m,onChange:y}),r.a.createElement("input",{disabled:!0,className:"send-datas",type:"submit"})))),r.a.createElement(g,null))}var A=a(28),U=a.n(A);a(49);function D(e){var t=Object(n.useContext)(p),a=Object(n.useState)(null),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(null),m=Object(d.a)(o,2),s=m[0],E=m[1];Object(n.useEffect)((function(){var a;t.auth.onAuthStateChanged((function(n){n?i(n):e.history.push("/"),t.getUserOrder().where("uid","==",n.uid).get().then((function(e){e.forEach((function(e){if(e.data().futurOrder[e.data().futurOrder.length-1]){var t=e.data().futurOrder[e.data().futurOrder.length-1];a=t}}))})).then((function(){E(a)}))}))}),[c]);return null===c?r.a.createElement("div",null,r.a.createElement("p",null,"Chargement ...")):r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{email:c.email}),r.a.createElement("h1",{className:"title-page"},"Commande"),r.a.createElement("hr",null),null===s?r.a.createElement("div",null,"Chargement ..."):r.a.createElement("section",{className:"container-commande"},r.a.createElement("div",{className:"container-datas-btn"},console.log(s),void 0!==s&&!0!==s.isPay?r.a.createElement("div",null,r.a.createElement("p",null,"V\xe9rification de votre commande:"),r.a.createElement("ul",null,s.obj.map((function(e,t){return r.a.createElement("li",null," ",e.quantity," ",e.name," ")})))):r.a.createElement("p",null,"Vous n'avez aucune commande"),r.a.createElement("div",{className:"btn-validate-come-back"},r.a.createElement("button",{className:"btn-payment",onClick:function(){t.getUserOrder().where("uid","==",c.uid).get().then((function(e){e.forEach((function(e){var a=e.data().futurOrder,n=s.id;t.getUserOrder().doc(c.uid).update({futurOrder:a.filter((function(e){return e.id!==n}))}).catch((function(e){console.error("Error removing document: ",e)}))}))})).then((function(){t.getUserOrder().doc(c.uid).update({futurOrder:t.addInArray().arrayUnion({id:s.id,isPay:!0,date:s.date,obj:s.obj})})})).then((function(){alert("Merci d'avoir payez")}))}},"Proc\xe9der au payement"),r.a.createElement(u.b,{className:"btn-payment",to:"welcome"},"Revenir \xe0 mes choix"))),r.a.createElement("div",{className:"img-commande"},r.a.createElement("img",{src:U.a}))),r.a.createElement(g,null))}a(50);function k(e){var t=Object(n.useContext)(p),a=Object(n.useState)(null),l=Object(d.a)(a,2),c=l[0],u=l[1],i=Object(n.useState)(null),o=Object(d.a)(i,2),m=o[0],s=o[1];return Object(n.useEffect)((function(){var a=[];t.auth.onAuthStateChanged((function(n){n?u(n):e.history.push("/"),t.getUserOrder().where("uid","==",n.uid).get().then((function(e){e.forEach((function(e){var t=e.data().futurOrder;a.push(t)}))})).then((function(){a.forEach((function(e){s(e)}))}))}))}),[c]),null===c?r.a.createElement("div",null,r.a.createElement("p",null,"Chargement...")):r.a.createElement("div",null,r.a.createElement(b,{email:c.email}),r.a.createElement("h1",{className:"title-page"},"R\xe9capitulatif"),r.a.createElement("hr",null),null===m?r.a.createElement("div",null,"Chargement ..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Nom"),r.a.createElement("th",null,"Quantit\xe9"),r.a.createElement("th",null,"Prix \u20ac"),r.a.createElement("th",null,"Prix \xe0 l'unit\xe9 \u20ac"))),r.a.createElement("tbody",null,m.map((function(e,t){var a=new Date(1e3*e.date.seconds);return e.obj.map((function(e,t){var n=e.quantity*e.price;return r.a.createElement("tr",{className:"test",key:t},r.a.createElement("td",null,a.getDate(),"/",a.getMonth()+1,"/",a.getFullYear()," \xe0 ",r.a.createElement("strong",null,a.getHours()),":",r.a.createElement("strong",null,a.getMinutes()),":",r.a.createElement("strong",null,a.getSeconds())),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,n),r.a.createElement("td",null,e.price))}))}))))),r.a.createElement(g,null))}function P(){return r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:s}),r.a.createElement(i.a,{path:"/welcome",component:v}),r.a.createElement(i.a,{path:"/login",component:N}),r.a.createElement(i.a,{path:"/signup",component:S}),r.a.createElement(i.a,{path:"/admin",component:x}),r.a.createElement(i.a,{path:"/commande",component:D}),r.a.createElement(i.a,{path:"/summaryOrders",component:k}),r.a.createElement(i.a,{component:w}))))}var I=a(29),M=a(11),F=a.n(M),q=(a(51),a(55),{apiKey:"AIzaSyDXTa75WNFCxnmqnNuIsv0RcLkRdHfYNOE",authDomain:"orders-restaurant.firebaseapp.com",databaseURL:"https://orders-restaurant.firebaseio.com",projectId:"orders-restaurant",storageBucket:"orders-restaurant.appspot.com",messagingSenderId:"454513792586",appId:"1:454513792586:web:d37e6a07f657da2d5df8b3",measurementId:"G-XGKP1LD2PF"}),R=function e(){var t=this;Object(I.a)(this,e),this.signupUser=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.setUserId=function(e,a){return t.userDb.doc(e).set({email:a,uid:e})},this.loginUser=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.signoutUser=function(){t.auth.signOut()},this.setMenu=function(e,a,n,r){return t.orderDb.doc().set({nom:e,prix:a,compo:n,id:r})},this.displayOrder=function(){return t.orderDb},this.getUserOrder=function(){return t.userDb},this.addInArray=function(){return t.array},this.removeInArray=function(){return t.array},this.addOrder=function(e,a,n,r){return t.userDb.doc(e).set({uid:e,email:a,futurOrder:[{id:0,isPay:!1,date:new Date,obj:n}]})},F.a.initializeApp(q),this.auth=F.a.auth(),this.userDb=F.a.firestore().collection("user"),this.orderDb=F.a.firestore().collection("orders"),this.array=F.a.firestore.FieldValue};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.Provider,{value:new R},r.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[30,1,2]]]);
//# sourceMappingURL=main.a2ad8ce7.chunk.js.map